<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="google-signin-client_id" content="1046825958514-c99r4dg3p8m730jcdonavpg5sr8at8ur.apps.googleusercontent.com" />
	<title>Title</title>
</head>
<body>
<button onclick="move()">클릭</button>
<section class="test">
	<div onclick="GoogleLoginBtn()">구글 OAuth2 연동</div>
	<div id="my-signin2" style="display: none"></div>
	<div id="auth2" onclick="GoogleLogOutBtn()">구글 로그아웃</div>
</section>
<script>
	function GoogleLoginBtn() {
		let self = this;

		window.gapi.signin2.render('my-signin2', {
			scope: 'profile email',
			width: 240,
			height: 50,
			longtitle: true,
			theme: 'dark',
			onsuccess: this.GoogleLoginSuccess,
			onfailure: this.GoogleLoginFailure,
		});

		setTimeout(function () {
			if (!self.googleLoginCheck) {
				const auth = window.gapi.auth2.getAuthInstance();
				auth.isSignedIn.get();
				document.querySelector('.abcRioButton').click();
			}
		}, 1500)
	}

	function GoogleLogOutBtn(){
		const auth2 = window.gapi.auth2.getAuthInstance();
		auth2.signOut().then(function () {
			alert('로그아웃 되었습니다.')
			console.log('User signed out.');
		});
	}

	async function GoogleLoginSuccess(googleUser) {
		const googleEmail = googleUser.getBasicProfile().getEmail();
		if (googleEmail !== 'undefined') {
			alert('로그인 되었습니다.')
			console.log(googleEmail);
			console.log(googleUser.getBasicProfile().getName());
			console.log(googleUser.getBasicProfile().getImageUrl());
			console.log(googleUser.getBasicProfile().getId());
			await this.$router.push('/')
		}
	}

	//구글 로그인 콜백함수 (실패)
	function GoogleLoginFailure(error) {
		console.log(error);
	}

	function move() {
		location.href='/test'
	}
</script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<div class="fb-login-button" data-width="" data-size="large" data-button-type="continue_with" data-layout="default" data-auto-logout-link="false" data-use-continue-as="false"></div>
</body>
<style>
	.test{ display:flex; justify-content: center; align-items: center; height:100vh; }
	div{ width: 200px; height:40px; background-color:#ffffff; border:1px #a8a8a8 solid; color:black; display:flex; align-items: center; justify-content: center; cursor:pointer; }
</style>
</html>